<!DOCTYPE html>
<html>
<head>
	<title>在线编程</title>
	<meta charset="UTF-8">

	<link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
	<link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
	<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="//cdn.bootcss.com/ace/1.2.3/ace.js"></script>

	<style type="text/css" media="screen">
		#editor {
			height: 300px;
		}
	</style>
	<style>
		.copyright {
			background: #111;
			font-size: 13px;
			text-align: center;
			color: #555;
			padding-top: 14px;
			padding-bottom: 20px;
			border-top: 1px solid #303030;
		}
		.pro {
			width: 100%;
			border: hidden;
			resize: none;
			font-size: large;
			padding: 20px;
			overflow-y: hidden;
		}
	</style>

</head>
<body>
<!-- 导航栏 -->
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">切换导航</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">CODE</a>
		</div>
		<div class="collapse navbar-collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="code.html">去练习</a></li>
				<li><a href="#" data-toggle="modal"
					   data-target="#myLogin">
					注册/登录
				</a>
				</li>
				<li><a href=""></a></li>
			</ul>
		</div>
	</div>
</nav>

<!-- 模态框 -->
<div class="modal fade" id="myLogin" tabindex="-1" role="dialog"
	 aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close"
						data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title" id="myModalLabel">
					登录在线编程
				</h4>
			</div>
			<div class="modal-body">
				<div class="input-group input-group-lg">
					<span class="input-group-addon"><i class="fa fa-envelope-o"></i></span>
					<input type="text" class="form-control" placeholder="请输入用户名">
				</div>
				<div class="input-group input-group-lg" style="margin-top: 20px">
					<span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
					<input type="text" class="form-control" placeholder="请输入密码">
					<span class="input-group-btn">
						<button class="btn btn-default" type="button" ng-controller="myLogin" ng-click="login()">登录</button>
               		</span>
				</div>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>

<div class="container" style="margin-top: 40px">
	<div class="page-header">
		<div class="row">
			<div class="col-sm-6">
				<h2 id="title">${pro.title}</h2>
			</div>
			<div class="input-group col-sm-3 pull-right" style="margin-top: 24px">
				<input type="text" class="form-control" id="proId">
				<span class="input-group-btn">
				  <button class="btn btn-default" type="button" id="getPro">
					  输入题号
				  </button>
			   	</span>
			</div>
		</div>
	</div>
</div>
<div class="container">
	<div class="page-header">
		<h3>题目描述</h3>
		<textarea class="pro" id="description">${pro.description}</textarea>
	</div>
</div>

<div class="container">
	<div class="page-header">
		<h3>输入</h3>
		<textarea class="pro" id="input">${pro.input}</textarea>
	</div>
</div>
<div class="container">
	<div class="page-header">
		<h3>输出</h3>
		<textarea class="pro" id="output">${pro.output}</textarea>
	</div>
</div>
<div class="container">
	<div class="page-header">
		<h3>样例输入</h3>
		<textarea class="pro" id="sampleInput">${pro.sampleInput}</textarea>
	</div>
</div>
<div class="container">
	<div class="page-header">
		<h3>样例输出</h3>
		<textarea class="pro" id="sampleOutput">${pro.sampleOutput}</textarea>
	</div>
</div>

<div class="container" style="margin-bottom: 200px">
	<div id="editor" class="row">public class Main {

	/*
	* This will cause the program to hang...
	*
	* Taken from:
	* http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/
	*/
	public static void main(String[] args) {
	double d = Double.parseDouble("2.2250738585072012e-308");

	// unreachable code
	System.out.println("Value: " + d);
	}
}
	</div>
	<button type="button" class="btn btn-primary btn-lg" style="margin-top: 40px" id="submitCode">原始按钮</button>
</div>

<div class="container" style="margin-bottom: 200px">
	<textarea id="response" class="pro alert alert-warning c"></textarea>
</div>


<nav class="navbar navbar-default navbar-fixed-bottom navbar-inverse">
	<div class="copyright">
		<div class="container">
			<div class="row">
				<div class="col-sm-12">
					<div class="text-center">
						Copyright © 折跃科技 | 京ICP备11008151号
					</div>
				</div>
			</div>
		</div>
	</div>
</nav>
<script>
	var editor = ace.edit("editor");
	//    editor.setTheme("ace/theme/solarized Light");
	editor.getSession().setMode("ace/mode/java");

	$(function() {
		$("#getPro").click(function() {
			$.ajax({
				type : "GET",
				url: "code/"+$("#proId").val(),
				contentType: "application/json; charset=utf-8",
				success : function(data) {
					$("#title").html(data.title);
					$("#description").html(data.description);
					$("#input").html(data.input);
					$("#output").html(data.output);
					$("#sampleInput").html(data.sampleInput);
					$("#sampleOutput").html(data.sampleOutput);
				}
			});
		});

		$("#submitCode").click(function() {
			var code = editor.getValue();
			$.ajax({
				type : "POST",
				url: "compileJava",
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				headers: {
					Accept: "application/json"
				},
				data: JSON.stringify({"code": code}),
				success : function(data) {
					alert(data.msg);
					$("#response").html(data.msg);
				}
			});
		});
	});
</script>
</body>
</html>